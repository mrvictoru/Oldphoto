.header-uploader {
	display: flex;
	align-items: center;
	gap: 14px;
	margin-bottom: 10px;
	padding: 12px 10px;
	border: 1.5px dashed #2563eb;
	border-radius: 10px;
	background: linear-gradient(90deg, #1e293b 60%, #2563eb11 100%);
	cursor: pointer;
	transition: background 0.2s, border-color 0.2s;
}
.header-uploader:hover, .header-uploader.dragover {
	background: linear-gradient(90deg, #2563eb22 60%, #2563eb33 100%);
	border-color: #7c3aed;
}
.header-icon {
	width: 48px;
	height: 48px;
	background: #2563eb;
	color: #fff;
	border-radius: 8px;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 2rem;
	box-shadow: 0 2px 8px #2563eb22;
}
body.light .header-uploader {
	background: linear-gradient(90deg, #f1f5fa 60%, #c7dafe22 100%);
	border-color: #6366f1;
}
body.light .header-uploader:hover, body.light .header-uploader.dragover {
	background: linear-gradient(90deg, #c7dafe44 60%, #6366f122 100%);
	border-color: #6366f1;
}
body.light .header-icon {
	background: #6366f1;
	color: #fff;
}
:root { --max-width:1200px }
body { padding: 18px; margin: 0 auto; max-width: var(--max-width); background:#0f1720; color: #e6eef8; font-family: Inter, system-ui, sans-serif }
header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:18px }
.layout { display:grid; grid-template-columns: 360px 1fr; gap:18px }
.card { background: #0b1220; border: 1px solid rgba(255,255,255,0.04); border-radius:10px; padding:18px }
.uploader-drop { border: 1px dashed rgba(255,255,255,0.06); border-radius:8px; padding:28px; text-align:center; cursor:pointer; display:flex; flex-direction:column; align-items:center; justify-content:center; width:100%; box-sizing:border-box }
.muted { color: #9aa8bf; font-size:0.95rem }
.credits { display:flex; align-items:center; gap:8px; margin-top:12px }
.create-btn { width:100%; margin-top:12px; background:linear-gradient(135deg,#2563eb,#7c3aed); color:#fff; font-weight:600; border:none; padding:14px 18px; border-radius:10px; cursor:pointer; font-size:1rem; letter-spacing:.3px; position:relative; overflow:hidden; transition:box-shadow .25s, transform .18s, background .4s }
.create-btn:before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 30% 20%,rgba(255,255,255,0.25),transparent 60%); opacity:0; transition:opacity .4s }
.create-btn:hover:before { opacity:1 }
.create-btn:hover { box-shadow:0 6px 22px -4px rgba(37,99,235,0.55),0 2px 6px rgba(0,0,0,0.4) }
.create-btn:active { transform:translateY(2px); box-shadow:0 3px 12px -2px rgba(37,99,235,0.55),0 1px 4px rgba(0,0,0,0.5) }
.create-btn:focus-visible { outline:2px solid #93c5fd; outline-offset:2px }
.create-btn:disabled { cursor:not-allowed; opacity:.55; box-shadow:none; background:linear-gradient(135deg,#334155,#475569) }
.spinner { width:18px; height:18px; border:3px solid rgba(255,255,255,0.25); border-top-color:#fff; border-radius:50%; animation: spin 0.8s linear infinite; display:inline-block; vertical-align:middle; margin-right:8px }
@keyframes spin { to { transform: rotate(360deg) } }
.error { color:#ff6b6b; font-weight:500 }
.history-list { list-style:none; padding:0; margin:0; max-height:220px; overflow:auto; font-size:0.85rem }
.history-list li { padding:6px 8px; border:1px solid rgba(255,255,255,0.06); border-radius:6px; margin-bottom:6px; display:flex; justify-content:space-between; align-items:center; gap:8px; cursor:pointer; background:#121b27 }
.history-list li:hover { background:#182331 }
.pill { background:#243347; padding:2px 6px; border-radius:4px; font-size:0.7rem; letter-spacing:0.5px }
.sample-header { display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:12px }
.slider-wrap { position:relative; overflow:hidden; border-radius:8px; background:#111316 }
.slider-wrap img { display:block; width:100%; height:auto }
.overlay-img { position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover }
.handle { position:absolute; top:50%; transform:translateY(-50%); left:50%; width:40px; height:40px; background:#fff; border-radius:40px; display:flex; align-items:center; justify-content:center; box-shadow:0 6px 18px rgba(0,0,0,0.6) }
.range { position:absolute; left:0; right:0; bottom:8px; padding:0 12px }
.hidden {
	position: absolute !important;
	width: 1px !important;
	height: 1px !important;
	padding: 0 !important;
	margin: -1px !important;
	overflow: hidden !important;
	clip: rect(0, 0, 0, 0) !important;
	white-space: nowrap !important;
	border: 0 !important;
}
@media (max-width:880px) { .layout { grid-template-columns: 1fr; } .create-btn{ position:sticky; bottom:12px } }
/* Light theme overrides */
body.light { background:#f5f7fa; color:#1e2933 }
body.light .card { background:#ffffff; border:1px solid #e3e8ef }
body.light .uploader-drop { border-color:#cfd8e3; background:#f8fafc; }
body.light .uploader-drop:hover { background:#f1f5f9 }
body.light .muted { color:#5c6b7b }
body.light .history-list li { background:#ffffff; border-color:#e3e8ef }
body.light .history-list li:hover { background:#f1f5f9 }
body.light .pill { background:#e2e8f0; color:#475569 }
body.light .create-btn { background:linear-gradient(135deg,#6366f1,#2563eb); box-shadow:0 4px 14px -4px rgba(99,102,241,0.5) }
body.light .create-btn:disabled { background:linear-gradient(135deg,#cbd5e1,#94a3b8); color:#475569 }
body.light #themeToggle { border-color:#cbd5e1; color:#334155 }
body.light #themeToggle:hover { background:#f1f5f9 }
body.light .handle { background:#2563eb; color:#fff }
body.light .slider-wrap { background:#e2e8f0 }
body.light .create-btn:focus-visible { outline:2px solid #2563eb }
body.light a { color:#2563eb }

/* Colorize switch */
.colorize-toggle { position:relative; display:inline-flex; align-items:center; cursor:pointer; user-select:none; }
.colorize-toggle input { position:absolute; opacity:0; width:0; height:0; }
.colorize-toggle .track {
	position:relative;
	width:118px;
	height:38px;
	padding:0 10px;
	box-sizing:border-box;
	background:linear-gradient(120deg,#444,#222);
	border-radius:32px;
	display:flex;
	align-items:center;
	justify-content:space-between;
	font-size:0.60rem;
	font-weight:600;
	letter-spacing:1px;
	color:#cbd5e1;
	text-transform:uppercase;
	border:1px solid #334155;
	transition:background .4s,border-color .4s, filter .4s;
	overflow:hidden;
}
.colorize-toggle .label-on, .colorize-toggle .label-off {
	position:relative;
	z-index:2;
	transition:color .35s;
	flex:1 1 0;
	text-align:center;
}
.colorize-toggle .label-on { color:#94a3b8 }
.colorize-toggle .label-off { color:#ffffff }
.colorize-toggle .knob {
	position:absolute;
	top:50%;
	left:3px;
	width:32px;
	height:32px;
	background:#1e293b;
	border-radius:50%;
	box-shadow:0 4px 10px -2px rgba(0,0,0,.6), 0 0 0 1px #1e293b;
	transition:transform .45s cubic-bezier(.65,.05,.36,1), background .45s, box-shadow .45s;
	z-index:1;
	transform:translateY(-50%) translateX(0);
}
.colorize-toggle input:checked + .track {
	background:linear-gradient(90deg,#ff0066,#ff8c00,#ffd500,#4cd964,#00aaff,#7a5cff,#ff2fb0);
	border-color:#64748b;
	filter:saturate(1.1) brightness(1.05);
}
.colorize-toggle input:checked + .track .label-on { color:#ffffff }
.colorize-toggle input:checked + .track .label-off { color:#e2e8f0 }
.colorize-toggle input:checked + .track .knob {
	transform:translateY(-50%) translateX(78px);
	background:#0f172a;
	box-shadow:0 4px 14px -3px rgba(0,0,0,.7), 0 0 0 1px #0f172a
}
.colorize-toggle input:focus-visible + .track { outline:2px solid #6366f1; outline-offset:2px }
body.light .colorize-toggle .track {
	/* Light mode (unchecked) should be monotone, no rainbow until checked */
	background:linear-gradient(120deg,#f1f5f9,#e2e8f0,#cbd5e1);
	border:1px solid #cbd5e1;
	color:#475569;
}
body.light .colorize-toggle .knob {
	background:#ffffff;
	box-shadow:0 2px 6px rgba(0,0,0,.25), 0 0 0 1px #e2e8f0
}
body.light .colorize-toggle input:checked + .track {
	background:linear-gradient(90deg,#ff0066,#ff8c00,#ffd500,#4cd964,#00aaff,#7a5cff,#ff2fb0);
	border-color:#94a3b8;
}
body.light .colorize-toggle input:checked + .track .knob { background:#ffffff }
/* Improve label contrast in light mode */
body.light .colorize-toggle .label-off { color:#1e293b }
body.light .colorize-toggle .label-on { color:#64748b }
body.light .colorize-toggle input:checked + .track .label-on { color:#ffffff }
body.light .colorize-toggle input:checked + .track .label-off { color:#f1f5f9 }
